{% extends "base.html" %}
{% load custom_filters %}
{% block content %}
<div id="app" class="wrap">
	<div class="p_side">

		<div class="mediaWidth flexParent">
			<a href="/" title="На главную страницу" class="bt flexChild">
				<i class="fa fa-home"></i>
			</a>
			<a href="#" id="bPrint" title="Распечатать" class="bt flexChild">
				<i aria-hidden="true" class="fa fa-print"></i>
			</a>
		</div>

		<div class="mediaWidth flexParent">
			<a href="/spells" title="Spells" class="bt flexChild">
				<i>Заклинания</i>
			</a>
			<a href="/items" title="Items" class="bt flexChild">
				<i>Предметы</i>
			</a>
		</div>

		<form id='search-form' action="/search/" method="get">
			<div class="mediaWidth">
				<div id="NameInput">
					<label class="filterLabel">{{ form.name.label }}</label>
					<div style="display: flex;">
						<div class="customInput">
							{{ form.name }}
						</div>
					</div>
				</div>
			</div>

			<div class="mediaWidth">
				<div id="ClassSelect">
					<label class="filterLabel">{{ form.dnd_class.label }}</label>
					<div>
						{{ form.dnd_class }}
					</div>
				</div>
			</div>

			<div class="mediaWidth">
				<div id="SubClassSelect">
					<label class="filterLabel">{{ form.subclass.label }}</label>
					<div class="customSelect">
						{{ form.subclass }}
					</div>
				</div>
			</div>

			<div class="mediaWidth">
				<label class="filterLabel">Уровень с/по</label>
				<div class="row">
					<div class="cell">
						<div id="LevelSelectStart">
							<div class="customSelect">
								{{ form.circle_from }}
							</div>
						</div>
					</div>
					<div class="cell">
						<div id="LevelSelectEnd">
							<div class="customSelect">
								{{ form.circle_to }}
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="mediaWidth">
				<div data-text="Школы" class="combo_box">
					<div id="schools_label" class="combo_box_title">{{form.schools.label}}</div>
					<div id="schools" class="combo_box_content" style="display: none">
						{{form.schools}}
					</div>
					<div id="schools_arrows" class="combo_box_arrow">
						<span id="schools_arr_down" class="arr_down">
							<i class="fa fa-arrow-down"></i>
						</span>
						<span id="schools_arr_up" class="arr_up" style="display: none;">
							<i class="fa fa-arrow-up"></i>
						</span>
					</div>
				</div>
			</div>

			<div class="mediaWidth">
				<div data-text="Книги" class="combo_box">
					<div id="books_label" class="combo_box_title">{{form.books.label}}</div>
					<div id="books" class="combo_box_content" style="display: none">
						{{form.books}}
					</div>
					<div id="books_arrows" class="combo_box_arrow">
						<span id="books_arr_down" class="arr_down">
							<i class="fa fa-arrow-down"></i>
						</span>
						<span id="books_arr_up" class="arr_up" style="display: none;">
							<i class="fa fa-arrow-up"></i>
						</span>
					</div>
				</div>
			</div>

			<div class="mediaWidth">
				<div data-text="Время накладывания" class="combo_box">
					<div id="cast_times_label" class="combo_box_title">{{form.cast_times.label}}</div>
					<div id="cast_times" class="combo_box_content" style="display: none">
						{{form.cast_times}}
					</div>
					<div id="cast_times_arrows" class="combo_box_arrow">
						<span id="cast_times_arr_down" class="arr_down">
							<i class="fa fa-arrow-down"></i>
						</span>
						<span id="cast_times_arr_up" class="arr_up" style="display: none;">
							<i class="fa fa-arrow-up"></i>
						</span>
					</div>
				</div>
			</div>

			<div class="mediaWidth">
				<div id="RitualCheckbox" title="" class="customCheckbox">
					{{form.is_ritual}}
					<span class="label">{{form.is_ritual.label}}</span>
				</div>
			</div>

			<input class="btn" type="submit" value="Поиск" />
		</form>


		<div class="mediaWidth">
			<div id="RitualCheckbox" title="" class="customCheckbox">
				<input type="checkbox" id="chb_RitualCheckbox">
				<span class="label">Ритуальные заклинания</span>
			</div>
		</div>
		<div class="mediaWidth">
			<label class="filterLabel">Ширина карточек</label>
			<div class="flexParent">
				<button title="Уменьшить ширину карточек" class="bt flexChild">
					<i aria-hidden="true" class="fa fa-caret-right"></i>
					<i aria-hidden="true" class="fa fa-caret-left"></i>
				</button>
				<button title="Сбросить ширину карточек" class="bt flexChild">
					<i aria-hidden="true" class="fa fa-square-o"></i>
				</button>
				<button title="Увеличить ширину карточек" class="bt flexChild">
					<i aria-hidden="true" class="fa fa-caret-left"></i>
					<i aria-hidden="true" class="fa fa-caret-right"></i>
				</button>
			</div>
		</div>
		<div class="mediaWidth">
			<div class="flexParent">
				<button class="bt flexChild" style="padding: 0.6em; margin: 0px;">
					Подстроить текст
				</button>
			</div>
		</div>
		<div class="mediaWidth">
			<div id="PrintBlack" title="" class="customCheckbox">
				<input type="checkbox" id="chb_PrintBlack">
				<span class="label">Черный цвет текста</span>
			</div>
		</div>
		<div class="mediaWidth">
			<div id="SortSelect">
				<label class="filterLabel">Сортировка</label>
				<div class="customSelect">
					<div class="label">По уровню и алфавиту</div>
					<ul class="list" style="display: none;">
						<li class="option">По уровню и алфавиту</li>
						<li class="option">По алфавиту</li>
					</ul>
				</div>
			</div>
		</div>
		<div class="mediaWidth">
			<div id="LangSelect">
				<label class="filterLabel">Язык</label>
				<div class="customSelect">
					<div class="label">Русский</div>
					<ul class="list" style="display: none;">
						<li class="option">Английский</li>
						<li class="option">Русский</li>
					</ul>
				</div>
			</div>
		</div>
		<div class="mediaWidth">
			<div id="ViewSelect">
				<label class="filterLabel">Вид</label>
				<div class="customSelect">
					<div class="label">Карточки</div>
					<ul class="list" style="display: none;">
						<li class="option">Карточки</li>
						<li class="option">Текст</li>
					</ul>
				</div>
			</div>
		</div>
		<hr>
		<div class="mediaWidth">
			<button title="Скачать базу данных в формате JSON" class="btn">
				Скачать
			</button>
		</div>
		<div class="mediaWidth">
			<input type="file" id="fileUploader" style="display: none;">
			<button title="Загрузить базу данных в формате JSON" class="btn">
				Загрузить
			</button>
		</div>
		<div class="mediaWidth">
			<div id="EditorCheckbox" title="" class="customCheckbox">
				<input type="checkbox" id="chb_EditorCheckbox">
				<span class="label">Редактирование</span>
			</div>
		</div>
		<div class="mediaWidth" style="display: none;">
			<label class="filterLabel">Скрытые заклинания (0)</label>
			<div id="HiddenItems">
				<a href="https://tentaculus.ru/spells/index.html#" class="bReturnUnvisible">Вернуть все обратно</a>
			</div>
		</div>
	</div>

	<div class='p_cont' ref="cardContainer">
		<div class="row spellContainer">
			{% for card in cards %}
				{% if card.style %}
					{% include "tentaculus/item_card.html" %}
				{% else %}
					{% include "tentaculus/spell_card.html" %}
				{% endif %}
				{% if card.second_side and card.second_side.style %}
					{% include "tentaculus/item_card.html" with card=card.second_side %}
				{% elif card.second_side %}
					{% include "tentaculus/spell_card.html" with card=card.second_side %}
				{% endif %}
			{% endfor %}
		</div>
	</div>
</div>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script>
	$("#id_dnd_class").change(function () {
		var classId = $(this).val();

		$.ajax({
			url: '/ajax-subclasses',
			data: {
				'class': classId
			},
			success: function (data) {
				$("#id_subclass").html(data);
			}
		});

	});

	$("#schools_label, #schools_arrows").click(function () {
		$('#schools').toggle();
		$('#schools_arr_up').toggle();
		$('#schools_arr_down').toggle();
	});

	$("#books_label, #books_arrows").click(function () {
		$('#books').toggle();
		$('#books_arr_up').toggle();
		$('#books_arr_down').toggle();
	});

	$("#cast_times_label, #cast_times_arrows").click(function () {
		$('#cast_times').toggle();
		$('#cast_times_arr_up').toggle();
		$('#cast_times_arr_down').toggle();
	});

	$("#RitualCheckbox").click(function () {
		$("#id_is_ritual").prop("checked", !$("#id_is_ritual").prop("checked"));
	});
</script>
{% endblock %}